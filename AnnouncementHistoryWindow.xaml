<Window x:Class="AnnouncementHistoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Histórico de Avisos" Height="500" Width="700"
        AllowsTransparency="True" WindowStyle="None" Background="Transparent"
        WindowStartupLocation="CenterOwner" Topmost="True">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Estilos.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Border CornerRadius="10" BorderBrush="#E0E0E0" BorderThickness="1" Background="White" MouseLeftButtonDown="Border_MouseLeftButtonDown">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Histórico Completo de Avisos" Grid.Row="0" FontWeight="SemiBold" FontSize="16" Foreground="#333" Margin="20"/>

            <DataGrid Grid.Row="1" x:Name="HistoryDataGrid" AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True"
                      HeadersVisibility="Column" GridLinesVisibility="Horizontal" Background="White"
                      BorderBrush="#E0E0E0" BorderThickness="1" RowHeaderWidth="0" Margin="20,0"
                      ItemsSource="{Binding AnnouncementsHistory}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Data/Hora" Binding="{Binding DisplayTimestamp}" Width="140"/>
                    <DataGridTextColumn Header="Admin" Binding="{Binding AdminUserName}" Width="120"/>
                    <DataGridTextColumn Header="Conteúdo" Binding="{Binding Content}" Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextWrapping" Value="Wrap"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTemplateColumn Width="80">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Excluir" FontSize="11" Padding="8,3" BorderThickness="0" Background="#FFEBEE" Foreground="#D32F2F" Cursor="Hand"
                                        ToolTip="Excluir este aviso permanentemente"
                                        Click="DeleteHistoryAnnouncementButton_Click"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20">
                <Button x:Name="btnClose" Content="Fechar" IsCancel="True" Click="btnClose_Click" Style="{StaticResource AppleButtonStyle}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>